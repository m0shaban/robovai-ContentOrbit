"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ¯ ContentOrbit CTA Strategy Engine                        â•‘
â•‘                    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”                         â•‘
â•‘                                                                              â•‘
â•‘   Smart Cross-Platform Call-to-Action System                                 â•‘
â•‘                                                                              â•‘
â•‘   Traffic Flow Strategy:                                                     â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚                         RSS SOURCE                                   â”‚   â•‘
â•‘   â”‚                              â”‚                                       â”‚   â•‘
â•‘   â”‚                              â–¼                                       â”‚   â•‘
â•‘   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚   â•‘
â•‘   â”‚   â”‚   Dev.to     â”‚â”€â”€â”€â–¶â”‚   Blogger    â”‚                              â”‚   â•‘
â•‘   â”‚   â”‚  (English)   â”‚    â”‚   (Arabic)   â”‚                              â”‚   â•‘
â•‘   â”‚   â”‚  Tech Pros   â”‚    â”‚  Arab Readersâ”‚                              â”‚   â•‘
â•‘   â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚   â•‘
â•‘   â”‚          â”‚                   â”‚                                       â”‚   â•‘
â•‘   â”‚          â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚   â•‘
â•‘   â”‚          â”‚    â”‚              â”‚              â”‚                       â”‚   â•‘
â•‘   â”‚          â–¼    â–¼              â–¼              â–¼                       â”‚   â•‘
â•‘   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚   â•‘
â•‘   â”‚   â”‚   Telegram   â”‚â—€â”€â”€â”€â”‚   Facebook   â”‚                              â”‚   â•‘
â•‘   â”‚   â”‚  (Hub/News)  â”‚    â”‚  (Social)    â”‚                              â”‚   â•‘
â•‘   â”‚   â”‚ All Links    â”‚    â”‚ â†’Blogger     â”‚                              â”‚   â•‘
â•‘   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                                                              â•‘
â•‘   Author: ContentOrbit Marketing & Dev Team                                  â•‘
â•‘   Version: 1.0.0                                                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
"""

import logging
from typing import Optional, Dict, List
from dataclasses import dataclass
from enum import Enum

logger = logging.getLogger(__name__)


class Platform(Enum):
    """Supported publishing platforms"""

    DEVTO = "devto"
    BLOGGER = "blogger"
    FACEBOOK = "facebook"
    TELEGRAM = "telegram"


@dataclass
class PlatformLinks:
    """Container for all platform URLs"""

    devto_url: Optional[str] = None
    blogger_url: Optional[str] = None
    facebook_url: Optional[str] = None
    telegram_url: Optional[str] = None

    # Public hubs/pages
    telegram_channel: str = "@robovai_hub"
    telegram_hub_url: str = "https://t.me/robovai_hub"
    facebook_page: str = "https://www.facebook.com/robovaisolutions"
    devto_profile: str = "https://dev.to/mohamedshabanai/"
    blogger_home: str = "https://www.robovai.tech/"
    whatsapp_url: str = "https://wa.me/201234567890"  # Update with actual number

    # Personal Branding & Community
    personal_site: str = "https://moshaban.me"
    community_chat: str = "https://t.me/robovai_chat"

    # RoboVAI Ecosystem
    academy_url: str = "https://academy.robovai.tech"
    bot_url: str = "https://bot.robovai.tech"
    junior_url: str = "https://junior.robovai.tech"
    core_url: str = "https://core.robovai.tech"

    def update_from_dict(self, config: Dict[str, str]):
        """Updates fields from a dictionary (e.g., from Google Sheets)."""
        for key, value in config.items():
            if hasattr(self, key):
                setattr(self, key, value)



class CTAStrategy:
    """
    ğŸ¯ Smart CTA Generator

    Generates platform-specific CTAs that create a traffic loop:

    Strategy Goals:
    1. Keep readers in our ecosystem
    2. Cross-promote all platforms
    3. Build community across channels
    4. Maximize engagement per platform

    Platform Roles:
    - Dev.to: Authority building (English tech community)
    - Blogger: Arabic content hub (main blog)
    - Facebook: Social engagement & sharing
    - Telegram: News hub & direct updates
    """

    def __init__(self, links: Optional[PlatformLinks] = None, config_manager=None):
        self.links = links or PlatformLinks()
        
        # If config manager provided and has sheets connected, sync
        if config_manager and config_manager.sheets_manager.is_connected():
            logger.info("âš¡ Syncing CTA Links from Google Sheets...")
            sheet_config = config_manager.sheets_manager.fetch_config()
            if sheet_config:
                self.links.update_from_dict(sheet_config)

    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # ğŸ“ BLOGGER CTAs (Arabic - Main Blog)
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    def get_blogger_cta(
        self, devto_url: Optional[str] = None, article_title: Optional[str] = None
    ) -> str:
        """
        Generate CTA for Blogger articles (Arabic).
        Strategy: "The Professional Friend" - Ecosystem Integration.
        """

        telegram_url = self.links.telegram_hub_url
        facebook_url = self.links.facebook_page
        personal_site = self.links.personal_site

        # RoboVAI Platforms
        academy = self.links.academy_url
        bot = self.links.bot_url
        junior = self.links.junior_url
        core = self.links.core_url

        cta_html = f"""
<div style="background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%); padding: 40px; border-radius: 15px; margin: 50px 0; direction: rtl; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; box-shadow: 0 10px 25px rgba(0,0,0,0.2);">
    
    <!-- Header -->
    <div style="text-align: center; margin-bottom: 35px;">
        <h3 style="color: #ffffff; font-size: 28px; margin: 0 0 10px 0; font-weight: 800;">
            ğŸš€ Ø§Ù„ÙØ±ØµØ© Ø¨ØªÙŠØ¬ÙŠ Ù„Ù„ÙŠ Ø¬Ø§Ù‡Ø² Ù„Ù‡Ø§.. ÙˆØ£Ù†Ø§ Ù‡Ù†Ø§ Ø¹Ø´Ø§Ù† Ø£Ø³Ø§Ø¹Ø¯Ùƒ
        </h3>
        <p style="color: #a0aec0; font-size: 18px; margin: 0;">
            Ø§Ù„ØªØ­ÙˆÙ„ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ù…Ø´ Ù…Ø¬Ø±Ø¯ ÙƒÙ„Ø§Ù…ØŒ Ø¯ÙŠ Ø®Ø·ÙˆØ§Øª Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¨Ù†ÙŠÙ‡Ø§ Ø³ÙˆØ§ ÙÙŠ RoboVAI
        </p>
    </div>
    
    <!-- RoboVAI Grid -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 35px;">
        
        <a href="{academy}" target="_blank" style="text-decoration: none; text-align: center; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px; transition: transform 0.2s; border: 1px solid rgba(255,255,255,0.1);">
            <div style="font-size: 30px; margin-bottom: 10px;">ğŸ“</div>
            <div style="color: white; font-weight: bold; margin-bottom: 5px;">RoboVAI Academy</div>
            <div style="color: #a0aec0; font-size: 12px;">ÙƒÙŠØ±ÙŠØ±Ùƒ ÙÙŠ Ø§Ù„Ù€ AI ÙŠØ¨Ø¯Ø£ Ù‡Ù†Ø§</div>
        </a>

        <a href="{bot}" target="_blank" style="text-decoration: none; text-align: center; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px; transition: transform 0.2s; border: 1px solid rgba(255,255,255,0.1);">
            <div style="font-size: 30px; margin-bottom: 10px;">ğŸ¤–</div>
            <div style="color: white; font-weight: bold; margin-bottom: 5px;">RoboVAI Bot</div>
            <div style="color: #a0aec0; font-size: 12px;">Ø£ØªÙ…ØªØ© Ø£Ø¹Ù…Ø§Ù„Ùƒ Ø¨Ø°ÙƒØ§Ø¡</div>
        </a>

        <a href="{junior}" target="_blank" style="text-decoration: none; text-align: center; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px; transition: transform 0.2s; border: 1px solid rgba(255,255,255,0.1);">
            <div style="font-size: 30px; margin-bottom: 10px;">ğŸ§’</div>
            <div style="color: white; font-weight: bold; margin-bottom: 5px;">RoboVAI Junior</div>
            <div style="color: #a0aec0; font-size: 12px;">Ø¹Ù„Ù‘Ù… Ø£ÙˆÙ„Ø§Ø¯Ùƒ Ù„ØºØ© Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„</div>
        </a>

        <a href="{core}" target="_blank" style="text-decoration: none; text-align: center; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px; transition: transform 0.2s; border: 1px solid rgba(255,255,255,0.1);">
            <div style="font-size: 30px; margin-bottom: 10px;">âš™ï¸</div>
            <div style="color: white; font-weight: bold; margin-bottom: 5px;">RoboVAI Core</div>
            <div style="color: #a0aec0; font-size: 12px;">Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…ØµØ§Ù†Ø¹ ÙˆØ§Ù„Ø´Ø±ÙƒØ§Øª</div>
        </a>

    </div>
    
    <!-- Platform Buttons -->
    <div style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-bottom: 25px;">
        
        <!-- Telegram Button (Primary) -->
        <a href="{telegram_url}" target="_blank" 
           style="display: inline-flex; align-items: center; gap: 8px; 
                  background: #0088cc; color: white; padding: 12px 24px; 
                  border-radius: 50px; text-decoration: none; font-weight: bold;
                  transition: transform 0.2s; box-shadow: 0 4px 15px rgba(0,136,204,0.4);">
            <span style="font-size: 20px;">ğŸ“±</span>
            Ù…Ø¬ØªÙ…Ø¹ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
        </a>
        
        <!-- Personal Site Button -->
        <a href="{personal_site}" target="_blank"
           style="display: inline-flex; align-items: center; gap: 8px;
                  background: #2d3748; color: white; padding: 12px 24px;
                  border-radius: 50px; text-decoration: none; font-weight: bold;
                  transition: transform 0.2s; border: 1px solid rgba(255,255,255,0.2);">
            <span style="font-size: 20px;">ğŸ‘¤</span>
            Ù…Ù† Ù‡Ùˆ Ù…Ø­Ù…Ø¯ Ø´Ø¹Ø¨Ø§Ù†ØŸ
        </a>
        
    </div>
</div>
"""

        # Add Dev.to link if available (for English version)
        if devto_url:
            cta_html += f"""
<div style="text-align: center; margin-top: 20px;">
    <a href="{devto_url}" target="_blank" style="color: #666; text-decoration: none; font-size: 14px;">
        ğŸŒ Prefer English? Read this article on Dev.to
    </a>
</div>
"""

        return cta_html

    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # ğŸ’» DEV.TO CTAs (English - Tech Community)
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    def get_devto_cta(
        self, blogger_url: Optional[str] = None, article_topic: Optional[str] = None
    ) -> str:
        """
        Generate CTA for Dev.to articles (English).

        Strategy:
        - Dev.to builds authority in tech community
        - Drive engagement (likes, comments, follows)
        - Mention Telegram for instant updates
        - Cross-link to Arabic version for bilingual readers
        """

        telegram_url = self.links.telegram_hub_url
        blogger_home = self.links.blogger_home

        cta_md = f"""
---

## ğŸš€ Enjoyed this article?

If you found this helpful, here's how you can support:

### ğŸ’™ Engage
- **Like** this post if it helped you
- **Comment** with your thoughts or questions
- **Follow** me for more tech content

### ğŸ“± Stay Connected
- **Telegram**: Join our updates hub â†’ [{telegram_url}]({telegram_url})
- **More Articles**: Check out the Arabic hub â†’ [{blogger_home}]({blogger_home})

"""

        if blogger_url:
            cta_md += f"""
### ğŸŒ Arabic Version
ØªÙØ¶Ù„ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ØŸ Ø§Ù‚Ø±Ø£ Ø§Ù„Ù…Ù‚Ø§Ù„ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©:
â†’ [{blogger_url}]({blogger_url})

"""

        cta_md += """
---

*Thanks for reading! See you in the next one.* âœŒï¸

"""

        return cta_md

    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # ğŸ“˜ FACEBOOK CTAs (Social Engagement)
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    def get_facebook_post(
        self, title: str, hook: str, blogger_url: str, emoji: str = "ğŸ”¥"
    ) -> str:
        """
        Generate Facebook post with CTA to Blogger.
        Strategy: "The Professional Friend" - First person, relatable, smart CTA.
        """

        telegram_url = self.links.telegram_hub_url
        whatsapp_url = self.links.whatsapp_url
        personal_site = self.links.personal_site
        community_chat = self.links.community_chat

        post = f"""{emoji} {title}

{hook}

Ø£Ù†Ø§ Ø¨Ù‚ÙˆÙ„Ùƒ: Ø§Ù„ØªØ­ÙˆÙ„ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ø¨ÙŠØ¨Ø¯Ø£ Ø¨Ø®Ø·ÙˆØ© Ø¨Ø³ÙŠØ·Ø©ØŒ ÙˆØ§Ù„ÙØ±ØµØ© Ø¨ØªÙŠØ¬ÙŠ Ù„Ù„ÙŠ Ø¬Ø§Ù‡Ø² Ù„Ù‡Ø§. Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ù…Ø´ Ø±ÙØ§Ù‡ÙŠØ©ØŒ Ø¯Ù‡ ØªØ£Ù…ÙŠÙ† Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø´Ø±ÙƒØªÙƒ ÙÙŠ Ø³ÙˆÙ‚ Ù…Ø¨ÙŠØ³ØªÙ†Ø§Ø´ Ø­Ø¯. ğŸ‡ªğŸ‡¬ğŸ­

ğŸ“– Ø´ÙˆÙ Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙƒØ§Ù…Ù„Ø© Ù‡Ù†Ø§:
ğŸ‘‡ğŸ‘‡ğŸ‘‡
{blogger_url}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Ù…Ø­ØªØ§Ø¬ Ù…Ø³Ø§Ø¹Ø¯Ø© ØªØ¨Ø¯Ø£ Ø£ÙˆÙ„ Ø®Ø·ÙˆØ© ÙÙŠ ØªØ­ÙˆÙ„ Ø´Ø±ÙƒØªÙƒ Ø§Ù„Ø±Ù‚Ù…ÙŠØŸ
ØªÙˆØ§ØµÙ„ Ù…Ø¹Ø§ÙŠØ§ Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù†Ù‚Ø§Ø´ ØªÙ‚Ù†ÙŠ ÙŠØºÙŠØ± Ù…Ø³Ø§Ø± Ø´ØºÙ„Ùƒ: {whatsapp_url}

Ø£Ùˆ Ø®Ø¯ ÙÙƒØ±Ø© Ø¹Ù† Ù…Ø´Ø§Ø±ÙŠØ¹Ù†Ø§ ÙˆÙ‚Ø¯Ø±Ø§ØªÙ†Ø§ Ù…Ù† Ù‡Ù†Ø§:
ğŸŒ {personal_site}

ğŸ“£ ØªØ§Ø¨Ø¹Ù†ÙŠ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù… Ø¹Ø´Ø§Ù† Ù…ÙŠÙÙˆØªÙƒØ´ Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©:
{telegram_url}

Ù„Ù„Ù†Ù‚Ø§Ø´Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©ØŒ Ø§Ù†Ø¶Ù… Ù„Ø¬Ø±ÙˆØ¨Ù†Ø§: {community_chat}

#TechnoEgypt #SMEs #DigitalTransformation #RoboVAI"""

        return post

    def get_facebook_post_engaging(
        self, title: str, key_points: List[str], blogger_url: str
    ) -> str:
        """
        Generate engaging Facebook post with bullet points.
        Strategy: "The Professional Friend" - Value first.
        """

        points_text = "\n".join([f"âœ… {point}" for point in key_points[:5]])

        telegram_url = self.links.telegram_hub_url
        whatsapp_url = self.links.whatsapp_url
        personal_site = self.links.personal_site

        post = f"""ğŸš€ {title}

Ù…Ù† ÙƒØªØ± Ù…Ø§ Ø´ÙˆÙØª Ø´Ø±ÙƒØ§Øª Ø¨ØªØ¶ÙŠØ¹ ÙˆÙ‚Øª ÙˆÙÙ„ÙˆØ³ØŒ Ø­Ø¨ÙŠØª Ø£Ø´Ø§Ø±ÙƒÙƒ Ø§Ù„Ø®Ù„Ø§ØµØ© Ø¯ÙŠ:

{points_text}

ÙÙŠ Ø§Ù„Ø£ÙˆÙ„ ÙˆØ§Ù„Ø¢Ø®Ø±ØŒ Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ù…Ø¹Ù…ÙˆÙ„Ø© Ø¹Ø´Ø§Ù† ØªØ®Ø¯Ù…Ù†Ø§ Ù…Ø´ ØªØ¹Ù‚Ø¯Ù†Ø§. 

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”— Ø§Ù‚Ø±Ø£ Ø§Ù„Ù…Ù‚Ø§Ù„ Ø§Ù„ÙƒØ§Ù…Ù„ Ø¹Ø´Ø§Ù† ØªÙÙ‡Ù… Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ÙƒØ¨Ø±:
{blogger_url}

Ù„Ùˆ Ø´Ø§ÙŠÙ Ø¥Ù† Ø§Ù„ÙƒÙ„Ø§Ù… Ø¯Ù‡ Ù…ÙÙŠØ¯ Ù„Ø¨ÙŠØ²Ù†Ø³ ØµØ§Ø­Ø¨ÙƒØŒ Ø§Ø¹Ù…Ù„Ù‡ Ù…Ù†Ø´Ù†.
ÙˆØªØ§Ø¨Ø¹Ù†ÙŠ Ù‡Ù†Ø§ Ù„Ù…Ø­ØªÙˆÙ‰ ÙŠÙˆÙ…ÙŠ Ø¨ÙŠØºÙŠØ± Ø·Ø±ÙŠÙ‚Ø© ØªÙÙƒÙŠØ±Ùƒ.

Ù…Ø­ØªØ§Ø¬ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø®Ø§ØµØ© Ù„Ù…Ø´Ø±ÙˆØ¹ÙƒØŸ
ğŸ“ {whatsapp_url}

Ø§Ø¹Ø±Ù Ø£ÙƒØªØ± Ø¹Ù† Ø§Ù„Ù„ÙŠ Ø¨Ù†Ù‚Ø¯Ù…Ù‡: {personal_site}

#ØªØ·ÙˆÙŠØ± #ØµÙ†Ø§Ø¹Ø© #RoboVAI"""

        return post

    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # ğŸ“± TELEGRAM CTAs (News Hub - All Links)
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    def get_telegram_message(
        self,
        title: str,
        summary: str,
        blogger_url: Optional[str] = None,
        devto_url: Optional[str] = None,
        key_points: Optional[List[str]] = None,
    ) -> str:
        """
        Generate Telegram message with all platform links.
        Strategy: Technical Value + "The Professional Friend" signature.
        """

        telegram_url = self.links.telegram_hub_url
        personal_site = self.links.personal_site
        community_chat = self.links.community_chat

        # Telegram UX: concise, technical, direct value.
        safe_title = title
        safe_summary = summary

        message = (
            "ğŸš€ <b>Technical Update</b>\n\n"
            f"<b>{safe_title}</b>\n\n"
            f"{safe_summary}\n\n"
        )

        # Add key points if provided
        if key_points:
            message += "\n<b>ğŸ› ï¸ Key Technical Insights:</b>\n"
            for point in key_points[:4]:
                message += f"â€¢ {point}\n"
            message += "\n"

        # Links section
        message += "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n"
        message += "ğŸ‘‡ <b>Get the Full Solution:</b>\n"

        if blogger_url:
            message += f'â€¢ ğŸ“‘ <a href="{blogger_url}">Strategy Guide (Arabic)</a>\n'

        if devto_url:
            message += f'â€¢ ğŸ’» <a href="{devto_url}">Technical Breakdown (Dev.to)</a>\n'

        message += f'\nğŸ’¬ <a href="{community_chat}">Discuss with Tech Community</a>\n'
        message += f'ğŸ‘¤ <a href="{personal_site}">About Mohamed Shaban</a>\n\n'

        # Engagement CTA
        message += (
            "<i>Need technical implementation? DM me.</i>\n"
            "#RoboVAI #DigitalTransformation #Tech"
        )

        return message

    def get_telegram_news_brief(
        self, title: str, one_liner: str, blogger_url: str
    ) -> str:
        """
        Generate short Telegram news brief.

        Strategy:
        - Ultra-short format for quick consumption
        - Single link focus
        - Easy engagement
        """

        return f"""âš¡ï¸ <b>{title}</b>

    {one_liner}

    ğŸ‘‰ <a href="{blogger_url}">Ø§Ù‚Ø±Ø£ Ø¯Ù„ÙˆÙ‚ØªÙŠ</a>

    â¤ï¸ Ù„Ù„Ù…Ø²ÙŠØ¯ ØªØ§Ø¨Ø¹ {self.links.telegram_channel}"""

    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # ğŸ”„ CROSS-PLATFORM INTEGRATION
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    def generate_all_ctas(
        self,
        title_ar: str,
        title_en: str,
        summary_ar: str,
        summary_en: str,
        blogger_url: str,
        devto_url: str,
        key_points_ar: Optional[List[str]] = None,
        key_points_en: Optional[List[str]] = None,
    ) -> Dict[str, str]:
        """
        Generate CTAs for all platforms at once.

        Returns a dictionary with ready-to-use content for each platform.
        """

        return {
            "blogger_cta": self.get_blogger_cta(devto_url=devto_url),
            "devto_cta": self.get_devto_cta(blogger_url=blogger_url),
            "facebook_post": self.get_facebook_post(
                title=title_ar,
                hook=summary_ar[:200] + "...",
                blogger_url=blogger_url,
                emoji="ğŸ”¥",
            ),
            "telegram_message": self.get_telegram_message(
                title=title_ar,
                summary=summary_ar,
                blogger_url=blogger_url,
                devto_url=devto_url,
                key_points=key_points_ar,
            ),
        }


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“Š CONTENT STRATEGY RECOMMENDATIONS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


class ContentStrategyAdvisor:
    """
    ğŸ“Š Marketing Strategy Advisor

    Provides recommendations for content optimization and cross-platform growth.
    """

    @staticmethod
    def get_platform_roles() -> Dict[str, Dict]:
        """Define the role of each platform in your ecosystem."""

        return {
            "devto": {
                "role": "Authority Builder",
                "audience": "English-speaking developers & tech enthusiasts",
                "content_type": "Long-form technical articles",
                "goal": "Build credibility, earn followers, get featured",
                "cta_focus": "Follow + Telegram",
                "posting_frequency": "2-3 articles/week",
                "best_times": "Tuesday-Thursday, 9AM-11AM EST",
            },
            "blogger": {
                "role": "Arabic Content Hub",
                "audience": "Arabic-speaking tech readers",
                "content_type": "Comprehensive articles with examples",
                "goal": "Be the go-to Arabic tech blog",
                "cta_focus": "Telegram + Facebook + Comments",
                "posting_frequency": "Daily",
                "best_times": "Evening hours (6PM-10PM Cairo time)",
            },
            "facebook": {
                "role": "Social Amplifier",
                "audience": "Casual tech-interested readers",
                "content_type": "Teasers, snippets, engagement posts",
                "goal": "Drive traffic to Blogger, build community",
                "cta_focus": "Read full article â†’ Blogger",
                "posting_frequency": "1-2 posts/day",
                "best_times": "12PM-2PM, 7PM-9PM",
            },
            "telegram": {
                "role": "News Hub & Community",
                "audience": "Engaged followers wanting instant updates",
                "content_type": "News briefs, all links, discussions",
                "goal": "Instant notification, cross-platform promotion",
                "cta_focus": "All platform links + engagement",
                "posting_frequency": "Every new article + daily tips",
                "best_times": "Anytime (instant delivery)",
            },
        }

    @staticmethod
    def get_traffic_flow_strategy() -> str:
        """Explain the optimal traffic flow between platforms."""

        return """
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ”„ TRAFFIC FLOW STRATEGY                           â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                       â•‘
â•‘   CONTENT CREATION FLOW:                                              â•‘
â•‘   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”                                               â•‘
â•‘   RSS Source â†’ AI Processing â†’ Dev.to (EN) + Blogger (AR)             â•‘
â•‘                                                                       â•‘
â•‘   TRAFFIC DISTRIBUTION:                                               â•‘
â•‘   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”                                               â•‘
â•‘                                                                       â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â•‘
â•‘   â”‚  Dev.to  â”‚ â”€â”€â”€â”€â”€â”€â–¶ â”‚ Telegram â”‚ â—€â”€â”€â”€â”€â”€â”€ All traffic               â•‘
â•‘   â”‚  (EN)    â”‚         â”‚  (Hub)   â”‚         converges here            â•‘
â•‘   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                   â•‘
â•‘        â”‚                    â”‚                                         â•‘
â•‘        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â•‘
â•‘        â”‚    â”‚               â”‚               â”‚                         â•‘
â•‘        â–¼    â–¼               â–¼               â–¼                         â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â•‘
â•‘   â”‚ Blogger  â”‚ â—€â”€â”€â”€â”€â”€â”€ â”‚ Facebook â”‚                                   â•‘
â•‘   â”‚  (AR)    â”‚         â”‚ (Social) â”‚                                   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â•‘
â•‘        â–²                    â”‚                                         â•‘
â•‘        â”‚                    â”‚                                         â•‘
â•‘        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â•‘
â•‘        (Facebook drives to Blogger)                                   â•‘
â•‘                                                                       â•‘
â•‘   KEY PRINCIPLES:                                                     â•‘
â•‘   â”â”â”â”â”â”â”â”â”â”â”â”â”â”                                                      â•‘
â•‘   1. Telegram = Central Hub (links to everything)                     â•‘
â•‘   2. Facebook = Social proof â†’ drives to Blogger                      â•‘
â•‘   3. Blogger = Arabic home (comprehensive content)                    â•‘
â•‘   4. Dev.to = English authority (tech credibility)                    â•‘
â•‘   5. Each platform mentions others strategically                      â•‘
â•‘                                                                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
"""

    @staticmethod
    def get_growth_tips() -> List[str]:
        """Get actionable growth tips."""

        return [
            "ğŸ¯ Telegram: Pin a welcome message with links to all platforms",
            "ğŸ“Š Track which platform drives most traffic using UTM parameters",
            "ğŸ”„ Cross-post teasers at different times for maximum reach",
            "ğŸ’¬ Engage with comments on all platforms within 1 hour",
            "ğŸ“± Use Instagram Stories to drive to Telegram (future expansion)",
            "ğŸ¬ Create short video summaries for TikTok/Reels (future expansion)",
            "ğŸ“§ Build email list from Blogger for direct communication",
            "ğŸ·ï¸ Use consistent hashtags across all platforms",
            "ğŸ“… Create a content calendar for coordinated posting",
            "ğŸ¤ Collaborate with other Arabic tech content creators",
        ]


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ§ª TESTING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


def demo():
    """Demonstrate the CTA strategy system."""

    print("=" * 60)
    print("ğŸ¯ CTA STRATEGY ENGINE DEMO")
    print("=" * 60)

    cta = CTAStrategy()
    advisor = ContentStrategyAdvisor()

    # Generate sample CTAs
    print("\nğŸ“ BLOGGER CTA (Arabic):")
    print("-" * 40)
    blogger_cta = cta.get_blogger_cta(devto_url="https://dev.to/robovai/sample-article")
    print(blogger_cta[:500] + "...")

    print("\nğŸ’» DEV.TO CTA (English):")
    print("-" * 40)
    devto_cta = cta.get_devto_cta(blogger_url="https://robovai.blogspot.com/article")
    print(devto_cta)

    print("\nğŸ“˜ FACEBOOK POST:")
    print("-" * 40)
    fb_post = cta.get_facebook_post(
        title="ÙƒÙŠÙ ØªØ¬Ø¹Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠÙƒØªØ¨ Ø¨Ø£Ø³Ù„ÙˆØ¨ Ø£Ù†ÙŠÙ‚",
        hook="Ø§ÙƒØªØ´Ù Ø£Ø³Ø±Ø§Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© Ù…Ø¹ AI ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù‚Ø§Ù„ Ø§Ù„Ø´Ø§Ù…Ù„",
        blogger_url="https://robovai.blogspot.com/article",
    )
    print(fb_post)

    print("\nğŸ“± TELEGRAM MESSAGE:")
    print("-" * 40)
    tg_msg = cta.get_telegram_message(
        title="ÙƒÙŠÙ ØªØ¬Ø¹Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠÙƒØªØ¨ Ø¨Ø£Ø³Ù„ÙˆØ¨ Ø£Ù†ÙŠÙ‚",
        summary="ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù‚Ø§Ù„ Ù†Ø³ØªÙƒØ´Ù ÙƒÙŠÙ ÙŠÙ…ÙƒÙ† ØªØ­Ø³ÙŠÙ† Ù…Ø®Ø±Ø¬Ø§Øª Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù„ØºØ©",
        blogger_url="https://robovai.blogspot.com/article",
        devto_url="https://dev.to/robovai/article",
        key_points_ar=["ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø¨Ø±ÙˆÙ…Ø¨Øª", "Ø£Ø³Ø§Ù„ÙŠØ¨ Ø§Ù„ØªØ­Ø³ÙŠÙ†", "Ø£Ù…Ø«Ù„Ø© Ø¹Ù…Ù„ÙŠØ©"],
    )
    print(tg_msg)

    print("\nğŸ“Š PLATFORM STRATEGY:")
    print("-" * 40)
    print(advisor.get_traffic_flow_strategy())

    print("\nğŸ’¡ GROWTH TIPS:")
    print("-" * 40)
    for tip in advisor.get_growth_tips():
        print(tip)


if __name__ == "__main__":
    demo()
